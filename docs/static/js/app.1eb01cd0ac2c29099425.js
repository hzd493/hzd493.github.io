webpackJsonp([1],{"+ZZd":function(t,e){},"4Jzy":function(t,e){},"60no":function(t,e){},"7QVd":function(t,e){},"832e":function(t,e){},"8pgM":function(t,e){},AqxL:function(t,e){},"Dg+X":function(t,e){},"H/MK":function(t,e){},H5dv:function(t,e){},KoYA:function(t,e){},M6QW:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("7+uW"),n={name:"top-bar",data:function(){return{offset:[14,-3],searchKey:"",goods:[]}},methods:{search:function(){var t=this;this.$store.state.searchResults=[],this.$store.state.searchKey=this.searchKey,this.$axios.get("http://localhost:3000/goods").then(function(e){if(t.goods=e.data,""===t.searchKey)t.$store.state.searchResults=t.goods;else for(var s=0;s<t.goods.length;s++)-1!==t.goods[s].name.indexOf(t.searchKey)&&t.$store.state.searchResults.push(t.goods[s])}),this.$router.push("/search-results")},blur:function(){this.searchKey=""},loginOut:function(){this.$store.state.ifLogin=!1,localStorage.setItem("iflogin","0")},judgeLogin1:function(){!1===this.$store.state.ifLogin?this.$router.push("/login"):this.$router.push("/personal")},judgeLogin2:function(){!1===this.$store.state.ifLogin?this.$router.push("/login"):this.$router.push("/shopcart")},judgeLogin3:function(){!1===this.$store.state.ifLogin?this.$router.push("/login"):this.$router.push("/message")},judgeLogin4:function(){!1===this.$store.state.ifLogin?this.$router.push("/login"):this.$router.push("/collect")}},computed:{ifLogin:function(){return this.$store.state.ifLogin},getUsername:function(){return this.$store.state.currentUser.username},getShopCartNum:function(){return this.$store.state.ifLogin?this.$store.state.currentUser.shopcart.length:0},getCollectNum:function(){return this.$store.state.ifLogin?this.$store.state.currentUser.collect.length:0},getMsgNum:function(){if(!this.$store.state.ifLogin)return 0;for(var t=0,e=0;e<this.$store.state.currentUser.msgid.length;e++)0===this.$store.state.currentUser.msgid[e].ifread&&t++;return t}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"top-bar"}},[s("div",{staticStyle:{"background-color":"black"}},[s("div",{attrs:{id:"top"}},[s("p",{directives:[{name:"show",rawName:"v-show",value:!t.ifLogin,expression:"!ifLogin"}],staticClass:"welcome"},[t._v("未登录，请先"),s("router-link",{attrs:{to:"/login"}},[t._v("登录")])],1),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.ifLogin,expression:"ifLogin"}],staticClass:"welcome"},[t._v("欢迎您，"+t._s(t.getUsername)),s("a",{attrs:{href:"/"},on:{click:t.loginOut}},[t._v("退出")])]),t._v(" "),s("router-link",{attrs:{to:"/register"}},[t._v("注册")]),t._v(" "),s("div",{staticClass:"right"},[s("router-link",{attrs:{to:"/"}},[t._v("商城首页")]),t._v(" "),s("a",{on:{click:function(e){return t.judgeLogin1()}}},[t.ifLogin?s("Avatar",{staticStyle:{"background-color":"#87d068"},attrs:{icon:"ios-person"}}):t._e(),t._v(" "),t.ifLogin?t._e():s("Avatar",{attrs:{icon:"ios-person"}}),t._v("个人中心\n        ")],1),t._v(" "),s("a",{on:{click:function(e){return t.judgeLogin2()}}},[s("Icon",{attrs:{type:"ios-cart"}}),t._v(" "),s("Badge",{attrs:{count:t.getShopCartNum,offset:t.offset}},[t._v("购物车")])],1),t._v(" "),s("a",{staticClass:"demo-badge",on:{click:function(e){return t.judgeLogin3()}}},[s("Icon",{attrs:{type:"ios-notifications"}}),t._v(" "),s("Badge",{attrs:{count:t.getMsgNum,offset:t.offset}},[t._v("消息通知")])],1),t._v(" "),s("a",{on:{click:function(e){return t.judgeLogin4()}}},[s("Icon",{attrs:{type:"ios-heart"}}),t._v(" "),s("Badge",{attrs:{count:t.getCollectNum,offset:t.offset}},[t._v("收藏夹")])],1)],1)],1)]),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"header"},[s("div",[s("img",{attrs:{src:"/static/images/logo.png",alt:"logo"}}),t._v(" "),s("img",{attrs:{src:"/static/images/logo-by.jpg",alt:"12.12"}}),t._v(" "),s("Menu",{staticClass:"guide",attrs:{mode:"horizontal","active-name":"1"}},[s("Submenu",{attrs:{name:"1"}},[s("template",{slot:"title"},[t._v("\n              菜单\n            ")]),t._v(" "),s("MenuGroup",{attrs:{title:"手机"}},[s("MenuItem",{attrs:{name:"1-1"}},[s("router-link",{attrs:{to:"/recommend"}},[t._v("小米")])],1),t._v(" "),s("MenuItem",{attrs:{name:"1-2"}},[s("router-link",{attrs:{to:"/discount"}},[t._v("红米")])],1),t._v(" "),s("MenuItem",{attrs:{name:"1-3"}},[s("router-link",{attrs:{to:"/fresh"}},[t._v("黑鲨")])],1)],1),t._v(" "),s("MenuGroup",{attrs:{title:"家电"}},[s("MenuItem",{attrs:{name:"1-4"}},[t._v("洗衣机")]),t._v(" "),s("MenuItem",{attrs:{name:"1-5"}},[t._v("电视")]),t._v(" "),s("MenuItem",{attrs:{name:"1-6"}},[t._v("吸尘器")]),t._v(" "),s("MenuItem",{attrs:{name:"1-7"}},[t._v("冰箱")]),t._v(" "),s("MenuItem",{attrs:{name:"1-8"}},[t._v("空调")]),t._v(" "),s("MenuItem",{attrs:{name:"1-9"}},[t._v("牙刷")])],1)],2),t._v(" "),s("MenuItem",{attrs:{name:"2"}},[s("router-link",{attrs:{to:"/"}},[t._v("商城首页")])],1),t._v(" "),s("MenuItem",{attrs:{name:"3"}},[s("router-link",{attrs:{to:"/recommend"}},[t._v("今日推荐")])],1),t._v(" "),s("MenuItem",{attrs:{name:"4"}},[s("router-link",{attrs:{to:"/discount"}},[t._v("双十二大促销")])],1),t._v(" "),s("MenuItem",{attrs:{name:"5"}},[s("router-link",{attrs:{to:"/fresh"}},[t._v("新品尝鲜")])],1)],1),t._v(" "),s("Input",{staticClass:"search",attrs:{suffix:"ios-search","enter-button":"",placeholder:"搜索..."},on:{"on-enter":t.search,"on-blur":t.blur},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1)])])])},staticRenderFns:[]};var i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"foot"}},[e("div",{staticClass:"container"},[e("router-link",{attrs:{to:"/miss"}},[e("img",{attrs:{src:"/static/images/foot.jpg"}})])],1)])},staticRenderFns:[]};var a={name:"App",components:{TopBar:s("VU/8")(n,r,!1,function(t){s("rVGK")},"data-v-7d0de3f8",null).exports,Foot:s("VU/8")({name:"foot"},i,!1,function(t){s("Dg+X")},"data-v-3d54251c",null).exports},methods:{init:function(){0===JSON.parse(localStorage.getItem("iflogin"))?this.$store.state.ifLogin=!1:(this.$store.state.ifLogin=!0,this.$store.state.currentUser=JSON.parse(localStorage.getItem("user")))}},mounted:function(){this.init()}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("top-bar"),this._v(" "),e("router-view"),this._v(" "),e("foot")],1)},staticRenderFns:[]};var l=s("VU/8")(a,c,!1,function(t){s("KoYA")},"data-v-608a0784",null).exports,u={name:"flashbuy",data:function(){return{left:0,goods:[],backwards:{hour:1,minute:9,second:5}}},methods:{init:function(){var t=document.getElementById("light");t.innerHTML+=t.innerHTML},move:function(){this.left-=2,this.left<-1736&&(this.left=0)},deliverDetails:function(t){this.$store.state.currentGood=this.goods[t]},counts:function(){var t=this;setInterval(function(){t.backwards.second--,0===t.backwards.second&&(t.backwards.minute--,t.backwards.second=59),t.backwards.minute<0&&(t.backwards.minute=59,t.backwards.hour--)},1e3)}},mounted:function(){var t=this;this.$axios.get("http://localhost:3000/goods?id_gte=28&id_lte=34").then(function(e){t.goods=e.data}),this.counts(),this.init(),setInterval(this.move,100)}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"flashbuy"}},[s("div",{staticClass:"backwards"},[s("img",{attrs:{src:"/static/images/flash.png",alt:""}}),t._v(" "),s("p",[t._v("距离结束还有：")]),t._v(" "),s("span",[t._v(t._s(t.backwards.hour)+" : "+t._s(t.backwards.minute)+" : "+t._s(t.backwards.second))])]),t._v(" "),s("div",{staticClass:"flash"},[s("ul",{style:{marginLeft:t.left+"px"},attrs:{id:"light"}},[t._l(t.goods,function(e,o){return[s("router-link",{key:o,attrs:{to:"/product-details"}},[s("li",{on:{click:function(e){return t.deliverDetails(o)}}},[s("img",{attrs:{src:e.url[0]}}),t._v(" "),s("h5",[t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),s("span",{staticClass:"price"},[t._v(t._s(e.price-e.discount)+"元")]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.discount>0,expression:"item.discount>0"}],staticClass:"linethrough"},[t._v(t._s(e.price)+"元")])])])]})],2)])])},staticRenderFns:[]};var d=s("VU/8")(u,h,!1,function(t){s("4Jzy")},"data-v-0e5b4477",null).exports,p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"recommend"}},[s("ul",[t._l(t.goods,function(e,o){return[s("router-link",{key:o,attrs:{to:"/product-details"}},[s("li",{on:{click:function(e){return t.deliverDetails(o)}}},[s("img",{attrs:{src:e.url[0]}}),t._v(" "),s("h5",[t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),s("span",{staticClass:"price"},[t._v(t._s(e.price-e.discount)+"元")]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.discount>0,expression:"item.discount>0"}],staticClass:"linethrough"},[t._v(t._s(e.price)+"元")])])])]})],2)])},staticRenderFns:[]};var m=s("VU/8")({name:"recommend",data:function(){return{goods:[]}},methods:{deliverDetails:function(t){this.$store.state.currentGood=this.goods[t]}},mounted:function(){var t=this;this.$axios.get("http://localhost:3000/goods?id_gte=1&id_lte=12").then(function(e){t.goods=e.data})}},p,!1,function(t){s("832e")},"data-v-5cf73fee",null).exports,v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"discount"}},[s("ul",[t._l(t.goods,function(e,o){return[s("router-link",{key:o,attrs:{to:"/product-details"}},[s("li",{key:o,on:{click:function(e){return t.deliverDetails(o)}}},[s("img",{attrs:{src:e.url[0]}}),t._v(" "),s("h5",[t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),s("span",{staticClass:"price"},[t._v(t._s(e.price-e.discount)+"元")]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.discount>0,expression:"item.discount>0"}],staticClass:"linethrough"},[t._v(t._s(e.price)+"元")])])])]})],2)])},staticRenderFns:[]};var f=s("VU/8")({name:"discount",data:function(){return{goods:[]}},methods:{deliverDetails:function(t){this.$store.state.currentGood=this.goods[t]}},mounted:function(){var t=this;this.$axios.get("http://localhost:3000/goods?id_gte=13&id_lte=24").then(function(e){t.goods=e.data})}},v,!1,function(t){s("M6QW")},"data-v-1eb5c6bb",null).exports,g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"fresh"}},[s("ul",[t._l(t.goods,function(e,o){return[s("router-link",{key:o,attrs:{to:"/product-details"}},[s("li",{on:{click:function(e){return t.deliverDetails(o)}}},[s("img",{attrs:{src:e.url[0]}}),t._v(" "),s("h5",[t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),s("span",{staticClass:"price"},[t._v(t._s(e.price-e.discount)+"元")]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.discount>0,expression:"item.discount>0"}],staticClass:"linethrough"},[t._v(t._s(e.price)+"元")])])])]})],2)])},staticRenderFns:[]};var _=s("VU/8")({name:"fresh",data:function(){return{goods:[]}},methods:{deliverDetails:function(t){this.$store.state.currentGood=this.goods[t]}},mounted:function(){var t=this;this.$axios.get("http://localhost:3000/goods?id_gte=35&id_lte=50").then(function(e){t.goods=e.data})}},g,!1,function(t){s("i1nD")},"data-v-c5b67862",null).exports,w={name:"home-body",components:{FlashBuy:d,Recommend:m,Discount:f,Fresh:_},data:function(){return{ifAuto:!0,ifDisplay:!1,hidelist:[],menuName:[{name:"小米"},{name:"红米"},{name:"家电"},{name:"显示器"},{name:"电视"},{name:"穿戴"},{name:"笔记本"},{name:"路由器"},{name:"耳机"},{name:"办公用品"}]}},methods:{deliverDetails:function(t){this.$store.state.currentGood=this.hidelist[t]},child:function(t){var e=this;this.$axios.get("http://localhost:3000/goods?id_gte="+(5*t+1)+"&id_lte="+(5*t+5)).then(function(t){e.hidelist=t.data})},stop:function(){this.ifAuto=!1},goon:function(){this.ifAuto=!0},product1:function(){var t=this;this.$axios.get("http://localhost:3000/goods/17").then(function(e){t.$store.state.currentGood=e.data}).then(function(){t.$router.push("/product-details")})},product2:function(){var t=this;this.$axios.get("http://localhost:3000/goods/12").then(function(e){t.$store.state.currentGood=e.data}).then(function(){t.$router.push("/product-details")})},product3:function(){var t=this;this.$axios.get("http://localhost:3000/goods/20").then(function(e){t.$store.state.currentGood=e.data}).then(function(){t.$router.push("/product-details")})},product4:function(){var t=this;this.$axios.get("http://localhost:3000/goods/6").then(function(e){t.$store.state.currentGood=e.data}).then(function(){t.$router.push("/product-details")})},product5:function(){var t=this;this.$axios.get("http://localhost:3000/goods/14").then(function(e){t.$store.state.currentGood=e.data}).then(function(){t.$router.push("/product-details")})},product6:function(){var t=this;this.$axios.get("http://localhost:3000/goods/37").then(function(e){t.$store.state.currentGood=e.data}).then(function(){t.$router.push("/product-details")})}}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"home-body"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"menu",on:{mouseover:function(e){t.ifDisplay=!0},mouseout:function(e){t.ifDisplay=!1}}},[s("ul",t._l(t.menuName,function(e,o){return s("router-link",{key:o,attrs:{to:"/login"}},[s("li",{on:{mouseover:function(e){return t.child(o)}}},[s("p",[t._v(t._s(e.name)),s("Icon",{attrs:{type:"ios-arrow-dropright",size:"24"}})],1)])])}),1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.ifDisplay,expression:"ifDisplay"}],staticClass:"hidemenu"},t._l(t.hidelist,function(e,o){return s("div",{key:o},[s("router-link",{attrs:{to:"/product-details"}},[s("img",{attrs:{src:e.url[1]},on:{click:function(e){return t.deliverDetails(o)}}})])],1)}),0)]),t._v(" "),s("div",{staticClass:"light",on:{mouseover:function(e){return t.stop()},mouseout:function(e){return t.goon()}}},[s("Carousel",{attrs:{"autoplay-speed:40000":"",autoplay:t.ifAuto,loop:""}},[s("CarouselItem",[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/8e66b78810fa8ce7c40259cafaad0258.jpg?thumb=1&w=1533&h=575&f=webp&q=90"},on:{click:t.product1}})]),t._v(" "),s("CarouselItem",[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/9ebff5f5c1f52f2dbdd611897adbefd4.jpg?thumb=1&w=1533&h=575&f=webp&q=90"},on:{click:t.product4}})]),t._v(" "),s("CarouselItem",[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/d01b4f4d20d1c909454b296f34143004.jpg?thumb=1&w=1533&h=575&f=webp&q=90",alt:""}})]),t._v(" "),s("CarouselItem",[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/0ef4160c861b998239bce9adb82341e7.jpg?thumb=1&w=1533&h=575&f=webp&q=90"},on:{click:t.product6}})]),t._v(" "),s("CarouselItem",[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/ec39b7eb802279eb693520915afdfa07.jpg?thumb=1&w=1533&h=575&f=webp&q=90",alt:""}})]),t._v(" "),s("CarouselItem",[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/ca9f53f40b08b09d9254f7b6b79c34e2.jpg?thumb=1&w=1533&h=575&f=webp&q=90"},on:{click:t.product5}})])],1)],1)]),t._v(" "),s("div",{staticClass:"subcontainer"},[s("div",{staticClass:"sub"},[s("div",{staticClass:"left"},[s("ul",{attrs:{id:"list"}},[s("li",[s("router-link",{attrs:{to:"/miss"}},[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/82abdba456e8caaea5848a0cddce03db.png?w=48&h=48",alt:""}}),s("br"),t._v("\n              小米秒杀\n            ")])],1),t._v(" "),s("div",{staticClass:"line1"}),t._v(" "),s("li",[s("router-link",{attrs:{to:"/miss"}},[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/806f2dfb2d27978e33fe3815d3851fa3.png?w=48&h=48",alt:""}}),s("br"),t._v("\n              企业团购\n            ")])],1),t._v(" "),s("div",{staticClass:"line1"}),t._v(" "),s("li",[s("router-link",{attrs:{to:"/miss"}},[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/eded6fa3b897a058163e2485532c4f10.png?w=48&h=48",alt:""}}),s("br"),t._v("\n              F码通道\n            ")])],1),t._v(" "),s("div",{staticClass:"line2"}),t._v(" "),s("div",{staticClass:"line2"}),t._v(" "),s("div",{staticClass:"line2"}),t._v(" "),s("li",[s("router-link",{attrs:{to:"/miss"}},[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/43a3195efa6a3cc7662efed8e7abe8bf.png?w=48&h=48",alt:""}}),s("br"),t._v("\n              米粉卡\n            ")])],1),t._v(" "),s("div",{staticClass:"line1"}),t._v(" "),s("li",[s("router-link",{attrs:{to:"/miss"}},[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/f4846bca6010a0deb9f85464409862af.png?w=48&h=48",alt:""}}),s("br"),t._v("\n              以旧换新\n            ")])],1),t._v(" "),s("div",{staticClass:"line1"}),t._v(" "),s("li",[s("router-link",{attrs:{to:"/miss"}},[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/9a76d7636b08e0988efb4fc384ae497b.png?w=48&h=48",alt:""}}),s("br"),t._v("\n              话费充值\n            ")])],1)])]),t._v(" "),s("div",{staticClass:"subimg"},[s("a",[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/8a43378b96501d7e227a9018fe2668c5.jpg?w=632&h=340"},on:{click:t.product1}})])]),t._v(" "),s("div",{staticClass:"subimg"},[s("a",[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/793913688bfaee26b755a0b0cc8575fd.jpg?w=632&h=340"},on:{click:t.product2}})])]),t._v(" "),s("div",{staticClass:"subimg"},[s("a",[s("img",{attrs:{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/e5f20a62c3d5b3d6806bd51ab6c5dd12.jpg?w=632&h=340"},on:{click:t.product3}})])])]),t._v(" "),s("h1",[t._v("小米闪购")]),t._v(" "),s("flash-buy"),t._v(" "),s("h2",[t._v("今日推荐")]),t._v(" "),s("router-link",{staticStyle:{float:"right","margin-top":"15px"},attrs:{to:"/recommend"}},[t._v("更多...")]),t._v(" "),s("div",{staticClass:"goods"},[s("recommend")],1),t._v(" "),s("h2",[t._v("双十二大促销")]),t._v(" "),s("router-link",{staticStyle:{float:"right","margin-top":"15px"},attrs:{to:"/discount"}},[t._v("更多...")]),t._v(" "),s("div",{staticClass:"goods"},[s("discount")],1),t._v(" "),s("h2",[t._v("新品尝鲜")]),t._v(" "),s("router-link",{staticStyle:{float:"right","margin-top":"15px"},attrs:{to:"/fresh"}},[t._v("更多...")]),t._v(" "),s("div",{staticClass:"goods"},[s("fresh")],1)],1)])},staticRenderFns:[]};var b=s("VU/8")(w,x,!1,function(t){s("+ZZd")},"data-v-0de26c86",null).exports,y={name:"register",data:function(){return{country:"",passwordcopy:"",errors:[],ifShow:{ifShowUsername:!1,ifShowPhone:!1,ifShowEmail:!1,ifShowPass:!1,ifShowCity:!1},newUser:{name:"",age:0,sex:"男",username:"",password:"",phone:"",email:"",address:[],shopcart:[],collect:[],msgid:[]},hotCities:[{value:"中国",label:"中国"},{value:"纽约",label:"纽约"},{value:"伦敦",label:"伦敦"},{value:"悉尼",label:"悉尼"}],otherCities:[{value:"渥太华",label:"渥太华"},{value:"巴黎",label:"巴黎"},{value:"堪培拉",label:"堪培拉"}]}},methods:{judge:function(t){var e=this,s=[],o=[],n=t.email.indexOf("@"),r=t.email.indexOf(".");this.$axios.get("http://localhost:3000/users").then(function(i){o=i.data;for(var a=0;a<o.length;a++)if(t.username===o[a].username){e.ifShow.ifShowUsername=!0,s.push("exised username\n"),console.log(o[a].username);break}return 0===e.country.length&&(e.ifShow.ifShowCity=!0,s.push("wrong country\n")),0===t.username.length&&(e.ifShow.ifShowUsername=!0,s.push("wrong username\n")),11!==t.phone.length&&(e.ifShow.ifShowPhone=!0,s.push("wrong phone\n")),0!==t.password.length&&0!==e.passwordcopy.length&&t.password===e.passwordcopy||(e.ifShow.ifShowPass=!0,s.push("wrong password\n")),(0===t.email.length||-1===n||-1===r||n>r)&&(e.ifShow.ifShowEmail=!0,s.push("wrong email\n")),s.length>0?(e.errors=s,0):1}).then(function(t){1===t&&(e.$axios.post("http://localhost:3000/users",e.newUser),swal("注册成功","注册成功，请前往登录","success"),e.reset(),e.$router.push("/login"))})},register:function(){this.ifShow={ifShowUsername:!1,ifShowPhone:!1,ifShowEmail:!1,ifShowPass:!1,ifShowCity:!1},this.judge(this.newUser)},reset:function(){this.newUser={name:"",age:0,sex:"男",username:"",password:"",phone:"",email:"",address:[],shopcart:[],collect:[],msgid:[]}}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{name:"register"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"body"},[s("img",{attrs:{src:"https://account.xiaomi.com/static/res/349d9c1/account-static/respassport/acc-2014/img/milogo.png",alt:"logo"}}),s("br"),t._v(" "),s("h1",[t._v("注册小米账号")]),s("br"),t._v(" "),s("b",[t._v("已有账号？点击"),s("router-link",{attrs:{to:"/login"}},[t._v("  登录")])],1),t._v(" "),s("div",{staticClass:"main"},[s("p",[t._v("国家/地区")]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.ifShow.ifShowCity,expression:"ifShow.ifShowCity"}],staticClass:"error"},[t._v("wrong country")]),t._v(" "),s("Select",{attrs:{prefix:"ios-locate-outline"},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}},[s("OptionGroup",{attrs:{label:"热门城市"}},t._l(t.hotCities,function(e){return s("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1),t._v(" "),s("OptionGroup",{attrs:{label:"其他城市"}},t._l(t.otherCities,function(e){return s("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),s("span",{staticStyle:{color:"red"}},[t._v("成功注册帐号后，国家/地区将不能被修改")]),t._v(" "),s("p",[t._v("输入手机号码")]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.ifShow.ifShowPhone,expression:"ifShow.ifShowPhone"}],staticClass:"error"},[t._v("wrong phone")]),t._v(" "),s("Input",{attrs:{prefix:"ios-phone-portrait",placeholder:"请输入手机号"},model:{value:t.newUser.phone,callback:function(e){t.$set(t.newUser,"phone",e)},expression:"newUser.phone"}}),t._v(" "),s("p",[t._v("输入邮箱")]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.ifShow.ifShowEmail,expression:"ifShow.ifShowEmail"}],staticClass:"error"},[t._v("wrong email")]),t._v(" "),s("Input",{attrs:{prefix:"ios-mail-outline",placeholder:"请输入邮箱"},model:{value:t.newUser.email,callback:function(e){t.$set(t.newUser,"email",e)},expression:"newUser.email"}}),t._v(" "),s("p",[t._v("用户名")]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.ifShow.ifShowUsername,expression:"ifShow.ifShowUsername"}],staticClass:"error"},[t._v("wrong username")]),t._v(" "),s("Input",{attrs:{prefix:"ios-people-outline",placeholder:"请输入用户名"},model:{value:t.newUser.username,callback:function(e){t.$set(t.newUser,"username",e)},expression:"newUser.username"}}),t._v(" "),s("p",[t._v("密码")]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.ifShow.ifShowPass,expression:"ifShow.ifShowPass"}],staticClass:"error"},[t._v("wrong password")]),t._v(" "),s("Input",{attrs:{prefix:"ios-lock-outline",type:"password",password:"",placeholder:"请输入密码"},model:{value:t.newUser.password,callback:function(e){t.$set(t.newUser,"password",e)},expression:"newUser.password"}}),t._v(" "),s("p",[t._v("确认密码")]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.ifShow.ifShowPass,expression:"ifShow.ifShowPass"}],staticClass:"error"},[t._v("wrong password")]),t._v(" "),s("Input",{attrs:{prefix:"ios-lock-outline",type:"password",password:"",placeholder:"请再次输入密码"},model:{value:t.passwordcopy,callback:function(e){t.passwordcopy=e},expression:"passwordcopy"}}),s("br"),s("br"),t._v(" "),s("p",{staticClass:"register"},[s("Button",{attrs:{type:"warning"},on:{click:function(e){return t.register()}}},[t._v("注册")])],1)],1)])])])},staticRenderFns:[]};var $=s("VU/8")(y,k,!1,function(t){s("vTX/")},"data-v-1ee1a2a9",null).exports,U=s("mvHQ"),C=s.n(U),S={name:"login",data:function(){return{loginUser:{username:"admin",password:"123456"},users:[]}},methods:{login:function(){var t=this;this.$axios.get("http://localhost:3000/users").then(function(e){t.users=e.data;for(var s=0;s<t.users.length;s++){if((t.loginUser.username===t.users[s].username||t.loginUser.username===t.users[s].phone||t.loginUser.username===t.users[s].email)&&t.loginUser.password===t.users[s].password)return swal({title:"登录成功",type:"success",confirmButtonColor:"#19be6b",confirmButtonText:"确认",closeOnConfirm:!1}),t.loginUser.username="",t.loginUser.password="",localStorage.setItem("user",C()(t.users[s])),localStorage.setItem("iflogin","1"),t.$store.state.currentUser=t.users[s],t.$store.state.ifLogin=!0,void t.$router.push("/");swal({title:"登录失败",type:"error",confirmButtonColor:"#DD6B55",confirmButtonText:"确认",closeOnConfirm:!1})}})}}},I={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{name:"login"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"body"},[s("img",{attrs:{src:"https://account.xiaomi.com/static/res/349d9c1/account-static/respassport/acc-2014/img/milogo.png",alt:"logo"}}),s("br"),t._v(" "),s("h1",[t._v("小米用户登录")]),s("br"),t._v(" "),s("b",[t._v("还没账号？点击"),s("router-link",{attrs:{to:"/register"}},[t._v("  注册")])],1),t._v(" "),s("div",{staticClass:"main"},[s("p",[t._v("账号")]),t._v(" "),s("Input",{attrs:{prefix:"ios-people-outline",placeholder:"手机号/邮箱/用户名","on-enter":"abc()"},model:{value:t.loginUser.username,callback:function(e){t.$set(t.loginUser,"username",e)},expression:"loginUser.username"}}),t._v(" "),s("p",[t._v("密码")]),t._v(" "),s("Input",{attrs:{prefix:"ios-lock-outline",type:"password",password:"",placeholder:"请输入密码"},model:{value:t.loginUser.password,callback:function(e){t.$set(t.loginUser,"password",e)},expression:"loginUser.password"}}),s("br"),s("br"),t._v(" "),s("p",{staticClass:"register"},[s("Button",{attrs:{type:"warning"},on:{click:t.login}},[t._v("登录")])],1)],1)])])])},staticRenderFns:[]};var L=s("VU/8")(S,I,!1,function(t){s("vCxf")},"data-v-0fc80dcc",null).exports,B={name:"shop-cart",data:function(){return{count:0,totalPrice:0,lists:[],choosed:[],shopcart:[],columns:[{title:"选择",slot:"select",align:"center"},{title:"商品名称",key:"name",align:"center"},{title:"单价",slot:"price",align:"center"},{title:"数量",slot:"num",align:"center"},{title:"小计",slot:"total",align:"center"},{title:"版本",slot:"version",align:"center"},{title:"颜色",slot:"color",align:"center"},{title:"操作",slot:"action",width:150,align:"center"}]}},methods:{select:function(){if(this.count++,this.count%2==1){for(var t=[],e=0;e<this.lists.length;e++)t[e]=e;this.choosed=t}else this.choosed=[]},update:function(){var t=JSON.parse(localStorage.getItem("user")).id;localStorage.setItem("user",C()(this.$store.state.currentUser)),this.$axios.patch("http://localhost:3000/users/"+t,this.$store.state.currentUser)},show:function(t){this.$Modal.info({title:"商品详情",content:"商品名称："+this.lists[t].name+"<br> 商品数量："+this.lists[t].num+"<br> 商品单价："+this.lists[t].price+"<br> 商品介绍："+this.lists[t].introduce+"<br>"})},remove:function(t){this.lists.splice(t,1),this.$store.state.currentUser.shopcart.splice(t,1),this.update()},minus:function(t){0!==this.lists[t].num&&(this.lists[t].num--,this.$store.state.currentUser.shopcart[t].num--,this.update())},plus:function(t){this.lists[t].num++,this.$store.state.currentUser.shopcart[t].num++,this.update()},getLists:function(){var t=this,e=[],s=this.$store.state.currentUser.shopcart;s=JSON.parse(C()(s)),this.shopcart=s,this.$axios.get("http://localhost:3000/goods").then(function(o){e=o.data;for(var n=0;n<s.length;n++)e[s[n].id-1].num=s[n].num,t.lists.push(e[s[n].id-1])})},buy:function(){var t=this;swal({title:"确定要购买吗?",type:"warning",showCancelButton:!0,cancelButtonText:"取消",confirmButtonColor:"#DD6B55",confirmButtonText:"购买!",closeOnConfirm:!1},function(){swal({title:"支付中...",type:"info",confirmButtonText:"正在支付，请稍等...",timer:2e3},function(){swal({title:"购买成功!",type:"success",confirmButtonColor:"#3e76f6",confirmButtonText:"确定"});for(var e=0;e<t.choosed.length;e++){t.lists.splice(t.choosed[e],1),t.shopcart.splice(t.choosed[e],1);for(var s=e;s<t.choosed.length;s++)t.choosed[s]>t.choosed[e]&&t.choosed[s]--}var o=[];for(e=0;e<t.lists.length;e++){var n={id:t.lists[e].id,num:t.lists[e].num,version:t.shopcart[e].version,color:t.shopcart[e].color};o.push(n)}t.choosed=[],t.$store.state.currentUser.shopcart=o,t.update()})})}},mounted:function(){"/shopcart"===this.$route.path&&this.getLists()},computed:{total:function(){return this.lists.length},getTotalPrice:function(){this.totalPrice=0;for(var t=this.choosed.length,e=0;e<t;e++)this.totalPrice+=this.lists[this.choosed[e]].price*this.lists[this.choosed[e]].num;return this.totalPrice}}},M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"shop-cart"}},[s("h1",[t._v("\n    我的购物车"),s("Icon",{attrs:{type:"ios-cart"}})],1),t._v(" "),s("h6",[t._v("温馨提示：产品是否购买成功，以最终下单为准哦，请尽快结算")]),t._v(" "),s("Table",{ref:"selection",attrs:{columns:t.columns,data:t.lists},scopedSlots:t._u([{key:"select",fn:function(e){e.row;var o=e.index;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.choosed,expression:"choosed"}],attrs:{type:"checkbox"},domProps:{value:o,checked:Array.isArray(t.choosed)?t._i(t.choosed,o)>-1:t.choosed},on:{change:function(e){var s=t.choosed,n=e.target,r=!!n.checked;if(Array.isArray(s)){var i=o,a=t._i(s,i);n.checked?a<0&&(t.choosed=s.concat([i])):a>-1&&(t.choosed=s.slice(0,a).concat(s.slice(a+1)))}else t.choosed=r}}})]}},{key:"version",fn:function(e){var s=e.row,o=e.index;return[t._v("\n      "+t._s(s.version[t.shopcart[o].version])+"\n    ")]}},{key:"color",fn:function(e){var s=e.row,o=e.index;return[t._v("\n      "+t._s(s.color[t.shopcart[o].color])+"\n    ")]}},{key:"num",fn:function(e){var o=e.row,n=e.index;return[s("Button",{attrs:{size:"small"},on:{click:function(e){return t.minus(n)}}},[t._v("-")]),t._v("\n      "+t._s(o.num)+"\n      "),s("Button",{attrs:{size:"small"},on:{click:function(e){return t.plus(n)}}},[t._v("+")])]}},{key:"price",fn:function(e){var s=e.row,o=e.index;return[t._v("\n      "+t._s(s.price+100*t.shopcart[o].version-s.discount)+"\n    ")]}},{key:"total",fn:function(e){var s=e.row,o=e.index;return[t._v("\n      "+t._s(s.num*(s.price+100*t.shopcart[o].version-s.discount))+"\n    ")]}},{key:"action",fn:function(e){e.row;var o=e.index;return[s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.show(o)}}},[t._v("详情")]),t._v(" "),s("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.remove(o)}}},[t._v("删除")])]}}])}),t._v("\n        \n  全选："),s("input",{staticStyle:{"margin-top":"15px"},attrs:{type:"checkbox"},on:{click:t.select}}),t._v(" "),s("div",{staticClass:"clear"},[s("router-link",{attrs:{to:"/"}},[t._v("继续购物")]),t._v("\n    共"),s("span",[t._v(t._s(t.total))]),t._v("件商品，已选择"),s("span",[t._v(t._s(t.choosed.length))]),t._v("件，\n    "),s("span",[t._v("合计："),s("h3",[t._v(t._s(t.getTotalPrice))]),t._v("元")]),t._v(" "),s("Button",{attrs:{shape:"circle"},on:{click:function(e){return t.buy()}}},[t._v("结算")])],1)],1)},staticRenderFns:[]};var N=s("VU/8")(B,M,!1,function(t){s("H/MK")},"data-v-58d49cd2",null).exports,D={name:"collect",data:function(){return{count:0,totalPrice:0,lists:[],choosed:[],collect:[],columns:[{title:"选择",slot:"select",align:"center"},{title:"商品名称",key:"name",align:"center"},{title:"单价",slot:"price",align:"center"},{title:"数量",slot:"num",align:"center"},{title:"小计",slot:"total",align:"center"},{title:"版本",slot:"version",align:"center"},{title:"颜色",slot:"color",align:"center"},{title:"操作",slot:"action",width:150,align:"center"}]}},methods:{test:function(){console.log(this.choosed),console.log(this.lists.length)},select:function(){if(this.count++,this.count%2==1){for(var t=[],e=0;e<this.lists.length;e++)t[e]=e;this.choosed=t}else this.choosed=[]},update:function(){var t=JSON.parse(localStorage.getItem("user")).id;localStorage.setItem("user",C()(this.$store.state.currentUser)),this.$axios.patch("http://localhost:3000/users/"+t,this.$store.state.currentUser)},show:function(t){this.$Modal.info({title:"商品详情",content:"商品名称："+this.lists[t].name+"<br> 商品数量："+this.lists[t].num+"<br> 商品单价："+this.lists[t].price+"<br> 商品介绍："+this.lists[t].introduce+"<br>"})},remove:function(t){this.lists.splice(t,1),this.$store.state.currentUser.collect.splice(t,1),this.update()},minus:function(t){0!==this.lists[t].num&&(this.lists[t].num--,this.$store.state.currentUser.collect[t].num--,this.update())},plus:function(t){this.lists[t].num++,this.$store.state.currentUser.collect[t].num++,this.update()},getLists:function(){var t=this,e=[],s=this.$store.state.currentUser.collect;s=JSON.parse(C()(s)),this.collect=s,this.$axios.get("http://localhost:3000/goods").then(function(o){e=o.data;for(var n=0;n<s.length;n++)e[s[n].id-1].num=s[n].num,t.lists.push(e[s[n].id-1])})},buy:function(){var t=this;swal({title:"确定要购买吗?",type:"warning",showCancelButton:!0,cancelButtonText:"取消",confirmButtonColor:"#DD6B55",confirmButtonText:"购买!",closeOnConfirm:!1},function(){swal({title:"支付中...",type:"info",confirmButtonText:"正在支付，请稍等...",timer:2e3},function(){swal({title:"购买成功!",type:"success",confirmButtonColor:"#3e76f6",confirmButtonText:"确定"});for(var e=0;e<t.choosed.length;e++){t.lists.splice(t.choosed[e],1),t.shopcart.splice(t.choosed[e],1);for(var s=e;s<t.choosed.length;s++)t.choosed[s]>t.choosed[e]&&t.choosed[s]--}var o=[];for(e=0;e<t.lists.length;e++){var n={id:t.lists[e].id,num:t.lists[e].num,version:t.shopcart[e].version,color:t.shopcart[e].color};o.push(n)}t.choosed=[],t.$store.state.currentUser.collect=o,t.update()})})}},mounted:function(){"/collect"===this.$route.path&&this.getLists()},computed:{total:function(){return this.lists.length},getTotalPrice:function(){this.totalPrice=0;for(var t=this.choosed.length,e=0;e<t;e++)this.totalPrice+=this.lists[this.choosed[e]].price*this.lists[this.choosed[e]].num;return this.totalPrice}}},j={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"collect"}},[s("h1",[t._v("\n    我的收藏夹"),s("Icon",{attrs:{type:"ios-heart"}})],1),t._v(" "),s("h6",[t._v("温馨提示：产品是否购买成功，以最终下单为准哦，请尽快结算")]),t._v(" "),s("Table",{ref:"selection",attrs:{columns:t.columns,data:t.lists},scopedSlots:t._u([{key:"select",fn:function(e){e.row;var o=e.index;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.choosed,expression:"choosed"}],attrs:{type:"checkbox"},domProps:{value:o,checked:Array.isArray(t.choosed)?t._i(t.choosed,o)>-1:t.choosed},on:{change:function(e){var s=t.choosed,n=e.target,r=!!n.checked;if(Array.isArray(s)){var i=o,a=t._i(s,i);n.checked?a<0&&(t.choosed=s.concat([i])):a>-1&&(t.choosed=s.slice(0,a).concat(s.slice(a+1)))}else t.choosed=r}}})]}},{key:"version",fn:function(e){var s=e.row,o=e.index;return[t._v("\n      "+t._s(s.version[t.collect[o].version])+"\n    ")]}},{key:"color",fn:function(e){var s=e.row,o=e.index;return[t._v("\n      "+t._s(s.color[t.collect[o].version])+"\n    ")]}},{key:"num",fn:function(e){var o=e.row,n=e.index;return[s("Button",{attrs:{size:"small"},on:{click:function(e){return t.minus(n)}}},[t._v("-")]),t._v("\n      "+t._s(o.num)+"\n      "),s("Button",{attrs:{size:"small"},on:{click:function(e){return t.plus(n)}}},[t._v("+")])]}},{key:"price",fn:function(e){var s=e.row,o=e.index;return[t._v("\n      "+t._s(s.price+100*t.collect[o].version-s.discount)+"\n    ")]}},{key:"total",fn:function(e){var s=e.row,o=e.index;return[t._v("\n      "+t._s(s.num*(s.price+100*t.collect[o].version-s.discount))+"\n    ")]}},{key:"action",fn:function(e){e.row;var o=e.index;return[s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.show(o)}}},[t._v("详情")]),t._v(" "),s("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.remove(o)}}},[t._v("删除")])]}}])}),t._v("\n        \n  全选："),s("input",{staticStyle:{"margin-top":"15px"},attrs:{type:"checkbox"},on:{click:t.select}}),t._v(" "),s("div",{staticClass:"clear"},[s("router-link",{attrs:{to:"/"}},[t._v("继续购物")]),t._v("\n    共"),s("span",[t._v(t._s(t.total))]),t._v("件商品，已选择"),s("span",[t._v(t._s(t.choosed.length))]),t._v("件，\n    "),s("span",[t._v("合计："),s("h3",[t._v(t._s(t.getTotalPrice))]),t._v("元")]),t._v(" "),s("Button",{attrs:{shape:"circle"},on:{click:function(e){return t.buy()}}},[t._v("结算")])],1)],1)},staticRenderFns:[]};var A=s("VU/8")(D,j,!1,function(t){s("Yhoy")},"data-v-3fbd5f16",null).exports,T={name:"msg",data:function(){return{msgs:[],columns:[{title:"消息",slot:"content"},{title:"操作",slot:"action",width:200,align:"center"}]}},methods:{update:function(){var t=JSON.parse(localStorage.getItem("user")).id;localStorage.setItem("user",C()(this.$store.state.currentUser)),this.$axios.patch("http://localhost:3000/users/"+t,this.$store.state.currentUser)},show:function(t){this.msgs[t].ifread=1,this.$store.state.currentUser.msgid[t].ifread=1,this.update(),this.$Modal.info({title:"消息详情",content:"内容："+this.msgs[t].content+"<br> 是否已读：已读<br>"})},remove:function(t){this.msgs.splice(t,1),this.$store.state.currentUser.msgid.splice(t,1),this.update()},getMsgs:function(){var t=this,e=[],s=this.$store.state.currentUser.msgid;s=JSON.parse(C()(s)),this.$axios.get("http://localhost:3000/msgs").then(function(o){e=o.data;for(var n=0;n<s.length;n++)e[s[n].id-1].ifread=s[n].ifread,t.msgs.push(e[s[n].id-1])})}},mounted:function(){this.getMsgs()}},O={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"msg"}},[s("h1",[t._v("\n    我的消息通知"),s("Icon",{attrs:{type:"ios-notifications"}})],1),t._v(" "),s("Table",{ref:"selection",attrs:{columns:t.columns,data:t.msgs},scopedSlots:t._u([{key:"content",fn:function(e){var o=e.row;return e.index,[t._v("\n      "+t._s(o.content)),s("Badge",{directives:[{name:"show",rawName:"v-show",value:0==o.ifread,expression:"row.ifread==0"}],attrs:{color:"red"}})]}},{key:"action",fn:function(e){e.row;var o=e.index;return[s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.show(o)}}},[t._v("详情")]),t._v(" "),s("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.remove(o)}}},[t._v("删除")])]}}])})],1)},staticRenderFns:[]};var P=s("VU/8")(T,O,!1,function(t){s("m++0")},"data-v-b9bcc87a",null).exports,R={name:"personal-center",data:function(){return{modal:!1,user:{},tempUser:{},shopcartLength:0,msgLength:0}},methods:{ok:function(){var t=[],e=this.tempUser.email.indexOf("@"),s=this.tempUser.email.indexOf(".");this.tempUser.username.length<1&&t.push("wrong username\n"),this.tempUser.name.length<1&&t.push("wrong name\n"),this.tempUser.age.length<1&&t.push("wrong age\n"),this.tempUser.sex.length<1&&t.push("wrong sex\n"),(this.tempUser.phone.length<1||11!==this.tempUser.phone.length)&&t.push("wrong phone\n"),this.tempUser.email.length<1&&t.push("wrong email\n"),(-1===e||-1===s||e>s)&&t.push("wrong email format"),t.length>0?swal("修改失败",t.splice(",").join(""),"error"):(this.user.username=this.tempUser.username,this.user.name=this.tempUser.name,this.user.age=this.tempUser.age,this.user.sex=this.tempUser.sex,this.user.phone=this.tempUser.phone,this.user.email=this.tempUser.email,this.update(),swal("修改成功","信息已经更新","success"))},update:function(){var t=JSON.parse(localStorage.getItem("user")).id;localStorage.setItem("user",C()(this.$store.state.currentUser)),this.$axios.patch("http://localhost:3000/users/"+t,this.$store.state.currentUser)},init:function(){this.user=this.$store.state.currentUser,this.tempUser.username=this.user.username,this.tempUser.name=this.user.name,this.tempUser.age=this.user.age,this.tempUser.sex=this.user.sex,this.tempUser.phone=this.user.phone,this.tempUser.email=this.user.email,this.shopcartLength=this.user.shopcart.length,this.msgLength=this.user.msgid.length},edit:function(){this.tempUser.username=this.user.username,this.tempUser.name=this.user.name,this.tempUser.age=this.user.age,this.tempUser.sex=this.user.sex,this.tempUser.phone=this.user.phone,this.tempUser.email=this.user.email,this.modal=!0}},mounted:function(){this.init()}},V={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"personal-center"}},[s("h1",[t._v("\n    我的个人中心"),s("Icon",{attrs:{type:"ios-person"}})],1),t._v(" "),s("div",{staticClass:"container"},[s("Card",{staticStyle:{width:"400px"}},[s("p",{attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"ios-person"}}),t._v("\n          个人信息\n      ")],1),t._v(" "),s("p",{attrs:{slot:"extra"},slot:"extra"},[s("a",[s("Button",{attrs:{size:"small"},on:{click:t.edit}},[t._v("编辑")])],1)]),t._v(" "),s("h5",[t._v("用户名:")]),t._v("\n      "+t._s(t.user.username)+"\n      "),s("h5",[t._v("姓名:")]),t._v("\n      "+t._s(t.user.name)+"\n      "),s("h5",[t._v("年龄:")]),t._v("\n      "+t._s(t.user.age)+"\n      "),s("h5",[t._v("性别:")]),t._v("\n      "+t._s(t.user.sex)+"\n      "),s("h5",[t._v("电话:")]),t._v("\n      "+t._s(t.user.phone)+"\n      "),s("h5",[t._v("邮箱:")]),t._v("\n      "+t._s(t.user.email)+"\n      "),s("h5",[t._v("地址:")]),t._v(" "),t._l(t.user.address,function(e,o){return s("p",{key:o},[t._v("\n        "+t._s(e)+"\n      ")])}),t._v(" "),s("h5",[t._v("购物车商品种类:")]),t._v("\n      "+t._s(t.shopcartLength)+"\n      "),s("h5",[t._v("消息数:")]),t._v("\n      "+t._s(t.msgLength)+"\n    ")],2),t._v(" "),s("Modal",{on:{"on-ok":t.ok},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("p",[t._v("用户名:")]),t._v(" "),s("Input",{attrs:{placeholder:"请输入"},model:{value:t.tempUser.username,callback:function(e){t.$set(t.tempUser,"username",e)},expression:"tempUser.username"}}),t._v(" "),s("p",[t._v("姓名:")]),t._v(" "),s("Input",{attrs:{placeholder:"请输入"},model:{value:t.tempUser.name,callback:function(e){t.$set(t.tempUser,"name",e)},expression:"tempUser.name"}}),t._v(" "),s("p",[t._v("年龄:")]),t._v(" "),s("Input",{attrs:{placeholder:"请输入"},model:{value:t.tempUser.age,callback:function(e){t.$set(t.tempUser,"age",e)},expression:"tempUser.age"}}),t._v(" "),s("p",[t._v("性别:")]),t._v(" "),s("Input",{attrs:{placeholder:"请输入"},model:{value:t.tempUser.sex,callback:function(e){t.$set(t.tempUser,"sex",e)},expression:"tempUser.sex"}}),t._v(" "),s("p",[t._v("电话:")]),t._v(" "),s("Input",{attrs:{placeholder:"请输入"},model:{value:t.tempUser.phone,callback:function(e){t.$set(t.tempUser,"phone",e)},expression:"tempUser.phone"}}),t._v(" "),s("p",[t._v("邮箱:")]),t._v(" "),s("Input",{attrs:{placeholder:"请输入"},model:{value:t.tempUser.email,callback:function(e){t.$set(t.tempUser,"email",e)},expression:"tempUser.email"}})],1)],1)])},staticRenderFns:[]};var G=s("VU/8")(R,V,!1,function(t){s("H5dv")},"data-v-bf64926e",null).exports,E={name:"product-details",data:function(){return{good:{},recommend:[],comtents:[],newComtent:{username:"",comtent:"",rate:0},currentUrl:"",price:0,discountPrice:0,currentVersion:"",currentColor:"",versionIndex:0,colorIndex:0,address:[],display:!1,top:0,left:0,collectDisplay:!1,collectTop:0,collectLeft:0,modal:!1,comtentModal:!1,newAddress:"",aftersale:["小米发货","7天无理由退货","运费说明","企业信息","售后服务政策","7天价格保护"],companies:["顺丰","邮政","中通","申通","百世","菜鸟"],activeVersion:["3px solid #ff6700","1px solid #757575","1px solid #757575"],activeColor:["3px solid #ff6700","1px solid #757575","1px solid #757575"],activeDeliver:["1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575"],activeUrl:["3px solid #ff6700","",""],activeAddress:["1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575"]}},methods:{chooseVersion:function(t){this.activeVersion=["1px solid #757575","1px solid #757575","1px solid #757575"],this.activeVersion[t]="3px solid #ff6700",this.price=this.good.price+100*t,this.discountPrice=this.price-this.good.discount,this.currentVersion=this.good.version[t],this.versionIndex=t},chooseColor:function(t){this.activeColor=["1px solid #757575","1px solid #757575","1px solid #757575"],this.activeColor[t]="3px solid #ff6700",this.currentColor=this.good.color[t],this.colorIndex=t},chooseAddress:function(t){this.activeAddress=["1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575"],this.activeAddress[t]="3px solid #ff6700"},chooseDeliver:function(t){this.activeDeliver=["1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575","1px solid #757575"],this.activeDeliver[t]="3px solid #ff6700"},chooseUrl:function(t){this.activeUrl=["","",""],this.activeUrl[t]="3px solid #ff6700"},changeUrl:function(t){this.currentUrl=this.good.url[t]},ok:function(){!1!==this.$store.state.ifLogin?(0===this.newAddress.length?swal("添加失败","地址不能为空","error"):(this.$store.state.currentUser.address.push(this.newAddress),this.update(),swal("添加成功","新地址已经添加","success")),this.newAddress=""):this.$router.push("/login")},comtentOk:function(){if(0===JSON.parse(localStorage.getItem("iflogin")))return this.$store.state.ifLogin=!1,this.$router.push("/login"),0;0===this.newComtent.comtent.length?swal("评论失败","评论不能为空","error"):0===this.newComtent.rate?swal("评论失败","评分不能为0","error"):(this.newComtent.username=this.$store.state.currentUser.username,this.$store.state.currentGood.comtents.push(this.newComtent),this.updateGood(),swal("评论成功","成功发表评论","success")),this.comtentCancel()},comtentCancel:function(){this.newComtent={username:"",comtent:"",rate:0}},cancel:function(){this.newAddress=""},getCurrentGood:function(){this.good=this.$store.state.currentGood,this.currentUrl=this.good.url[0],this.currentVersion=this.good.version[0],this.currentColor=this.good.color[0],this.address=this.$store.state.currentUser.address,this.price=this.good.price,this.discountPrice=this.price-this.good.discount},update:function(){var t=JSON.parse(localStorage.getItem("user")).id;localStorage.setItem("user",C()(this.$store.state.currentUser)),this.$axios.patch("http://localhost:3000/users/"+t,this.$store.state.currentUser)},updateGood:function(){var t=this.$store.state.currentGood.id;this.$axios.patch("http://localhost:3000/goods/"+t,this.$store.state.currentGood)},addToCart:function(){var t=this;if(0===JSON.parse(localStorage.getItem("iflogin")))return this.$store.state.ifLogin=!1,this.$router.push("/login"),0;for(var e=this.$store.state.currentUser.shopcart,s=0;s<e.length;s++)if(e[s].id===this.good.id)return this.$router.push("/shopcart"),0;this.$store.state.currentUser.shopcart.push({id:this.good.id,num:1,version:this.versionIndex,color:this.colorIndex}),this.update(),this.display=!0;var o=setInterval(function(){t.left+=50,t.top-=159,500===t.left&&(clearInterval(o),t.top=0,t.left=0,t.display=!1)},100)},addToCollect:function(){var t=this;if(0===JSON.parse(localStorage.getItem("iflogin")))return this.$store.state.ifLogin=!1,this.$router.push("/login"),0;for(var e=this.$store.state.currentUser.collect,s=0;s<e.length;s++)if(e[s].id===this.good.id)return this.$router.push("/collect"),0;this.$store.state.currentUser.collect.push({id:this.good.id,num:1,version:this.versionIndex,color:this.colorIndex}),this.update(),this.collectDisplay=!0;var o=setInterval(function(){t.collectLeft+=50,t.collectTop-=159,500===t.collectLeft&&(clearInterval(o),t.collectTop=0,t.collectLeft=0,t.collectDisplay=!1)},100)},deliverDetails:function(t){this.$store.state.currentGood=this.recommend[t],"/product-details"===this.$route.path?this.$router.push("/recommend-details"):this.$router.push("/product-details")},getRecommendList:function(){for(var t=this,e=0;e<6;e++){var s=Math.floor(50*Math.random())+1;this.$axios.get("http://localhost:3000/goods/"+s).then(function(e){s=Math.floor(50*Math.random())+1,t.recommend.push(e.data)})}},getComtents:function(){this.comtents=this.$store.state.currentGood.comtents}},mounted:function(){this.getCurrentGood(),this.getRecommendList(),this.getComtents()}},z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"product-details"}},[s("h1",[t._v("商品详情")]),t._v(" "),s("div",{staticClass:"container"},[s("vue-photo-zoom-pro",{staticClass:"img",attrs:{url:t.currentUrl,scale:3,width:200,height:200,"out-zoomer":!0}}),t._v(" "),s("ul",{staticClass:"list"},t._l(t.good.url,function(e,o){return s("li",{key:o,style:{border:t.activeUrl[o]},on:{click:function(e){return t.chooseUrl(o)}}},[s("img",{attrs:{src:e},on:{click:function(e){return t.changeUrl(o)}}})])}),0),t._v(" "),s("h2",{staticStyle:{"margin-top":"100px"}},[t._v("相关推荐")]),t._v(" "),s("ul",{staticClass:"recommend"},[t._l(t.recommend,function(e,o){return[s("router-link",{key:o,attrs:{to:"/product-details"}},[s("li",{on:{click:function(e){return t.deliverDetails(o)}}},[s("img",{attrs:{src:e.url[0]}}),t._v(" "),s("h5",[t._v("\n              "+t._s(e.name)+"\n            ")]),t._v(" "),s("span",{staticClass:"price"},[t._v(t._s(e.price-e.discount)+"元")]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.discount>0,expression:"item.discount>0"}],staticStyle:{"text-decoration":"line-through"}},[t._v(t._s(e.price)+"元")])])])]})],2),t._v(" "),s("Card",{staticStyle:{width:"450px"}},[s("p",{attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"ios-list-box-outline"}}),t._v("\n        用户评论\n      ")],1),t._v(" "),s("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[s("Icon",{attrs:{type:"ios-loop-strong"}}),t._v(" "),s("Button",{attrs:{size:"small"},on:{click:function(e){t.comtentModal=!0}}},[t._v("发表评论")])],1),t._v(" "),s("ul",{staticClass:"comtent"},t._l(t.comtents,function(e,o){return s("li",{key:o},[t._v("\n          "+t._s(e.username)+"\n          "),s("span",[t._l(4,function(t){return s("Icon",{key:t,attrs:{type:"ios-star"}})}),e.rate>=9.5?s("Icon",{attrs:{type:"ios-star"}}):s("Icon",{attrs:{type:"ios-star-half"}}),t._v("\n            "+t._s(e.rate)+"\n          ")],2),t._v(" "),s("p",[t._v(t._s(e.comtent))]),t._v(" "),s("hr")])}),0)]),t._v(" "),s("Modal",{on:{"on-ok":t.comtentOk,"on-cancel":t.comtentCancel},model:{value:t.comtentModal,callback:function(e){t.comtentModal=e},expression:"comtentModal"}},[s("p",[t._v("请您发表评论：")]),t._v(" "),s("Input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:7},placeholder:"请输入"},model:{value:t.newComtent.comtent,callback:function(e){t.$set(t.newComtent,"comtent",e)},expression:"newComtent.comtent"}}),s("br"),s("br"),t._v(" "),s("Input",{attrs:{placeholder:"请输入"},model:{value:t.newComtent.rate,callback:function(e){t.$set(t.newComtent,"rate",e)},expression:"newComtent.rate"}})],1)],1),t._v(" "),s("div",{staticClass:"details"},[s("h3",[t._v("商品名称     "+t._s(t.good.name))]),s("br"),t._v(" "),s("h4",[t._v("商品详情介绍")]),t._v(" "),s("p",{staticClass:"introduce"},[t._v(t._s(t.good.introduce))]),t._v(" "),s("br"),s("h2",{staticClass:"price"},[t._v(t._s(t.discountPrice)+"元")]),s("p",{directives:[{name:"show",rawName:"v-show",value:t.good.discount>0,expression:"good.discount>0"}],staticClass:"linethrough"},[t._v(t._s(t.price)+"元")]),s("br"),t._v(" "),s("h4",[t._v("选择版本")]),t._v(" "),s("ul",{staticClass:"version"},t._l(t.good.version,function(e,o){return s("li",{key:o,style:{border:t.activeVersion[o]},on:{click:function(e){return t.chooseVersion(o)}}},[t._v("\n        "+t._s(e)+"\n      ")])}),0),t._v(" "),s("h4",[t._v("选择配色")]),t._v(" "),s("ul",{staticClass:"color"},t._l(t.good.color,function(e,o){return s("li",{key:o,style:{border:t.activeColor[o]},on:{click:function(e){return t.chooseColor(o)}}},[t._v("\n        "+t._s(e)+"\n      ")])}),0),t._v(" "),s("h4",[t._v("选择物流公司")]),t._v(" "),s("ul",{staticClass:"company"},t._l(t.companies,function(e,o){return s("li",{key:o,style:{border:t.activeDeliver[o]},on:{click:function(e){return t.chooseDeliver(o)}}},[t._v("\n        "+t._s(e)+"\n      ")])}),0),t._v(" "),s("h4",[t._v("选择地址")]),t._v(" "),s("Button",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"small"},on:{click:function(e){t.modal=!0}}},[t._v("添加地址")]),t._v(" "),s("Modal",{on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("p",[t._v("请添加新地址：")]),t._v(" "),s("Input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:7},placeholder:"请输入"},model:{value:t.newAddress,callback:function(e){t.newAddress=e},expression:"newAddress"}})],1),t._v(" "),s("ul",{staticClass:"address"},t._l(t.address,function(e,o){return s("li",{key:o,style:{border:t.activeAddress[o]},on:{click:function(e){return t.chooseAddress(o)}}},[t._v("\n        "+t._s(e)+"\n        ")])}),0),t._v(" "),s("div",{staticClass:"subdetails"},[s("h3",{staticStyle:{"padding-top":"60px","margin-left":"50px","text-align":"center"}},[t._v("\n        "+t._s(t.good.name)+"    "+t._s(t.currentVersion)+"     "+t._s(t.currentColor)+"\n      ")]),t._v(" "),s("h1",{staticStyle:{color:"#ff6700"}},[t._v(t._s(t.discountPrice)+"元")])]),t._v(" "),s("div",{staticClass:"add"},[s("Icon",{directives:[{name:"show",rawName:"v-show",value:t.display,expression:"display"}],staticClass:"fly",style:{marginTop:t.top+"px",marginLeft:t.left+"px"},attrs:{type:"ios-cart",size:"20"}}),t._v(" "),s("Button",{staticStyle:{width:"200px"},attrs:{type:"warning"},on:{click:t.addToCart}},[t._v("加入购物车")]),t._v(" "),s("Icon",{directives:[{name:"show",rawName:"v-show",value:t.collectDisplay,expression:"collectDisplay"}],staticClass:"fly",style:{marginTop:t.collectTop+"px",marginLeft:t.collectLeft+"px"},attrs:{type:"ios-heart",size:"20"}}),t._v(" "),s("Button",{staticStyle:{width:"200px"},attrs:{type:"warning"},on:{click:t.addToCollect}},[t._v("加入收藏夹")])],1),t._v(" "),s("ul",{staticClass:"aftersale"},[s("router-link",{attrs:{to:"/miss"}},t._l(t.aftersale,function(e,o){return s("li",{key:o},[s("Icon",{attrs:{type:"md-checkmark-circle-outline",size:"20"}}),t._v(t._s(e)+"\n        ")],1)}),0)],1)],1),t._v(" "),s("div",{staticClass:"pictures"},[s("ul",{staticClass:"pic"},t._l(t.good.url,function(t,e){return s("li",{key:e},[s("img",{attrs:{src:t}})])}),0)])])},staticRenderFns:[]};var F=s("VU/8")(E,z,!1,function(t){s("AqxL")},"data-v-2cefc52d",null).exports,J={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"not-found"}},[e("div",{staticClass:"container"},[e("p",[this._v("对不起，该功能有待完善")]),this._v(" "),e("h1",[this._v("404")])])])}]};var K=s("VU/8")({name:"not-found"},J,!1,function(t){s("8pgM")},"data-v-2bdeca13",null).exports,q={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"search-results"}},[s("ul",[t._l(t.getResults,function(e,o){return[s("router-link",{key:o,attrs:{to:"/product-details"}},[s("li",{on:{click:function(e){return t.deliverDetails(o)}}},[s("img",{attrs:{src:e.url[0]}}),t._v(" "),s("h5",[t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),s("span",{staticClass:"price"},[t._v(t._s(e.price-e.discount)+"元")]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.discount>0,expression:"item.discount>0"}],staticClass:"linethrough"},[t._v(t._s(e.price)+"元")])])])]})],2)])},staticRenderFns:[]};var H=s("VU/8")({name:"search-results",data:function(){return{}},methods:{deliverDetails:function(t){this.$store.state.currentGood=this.$store.state.searchResults[t]}},computed:{getResults:function(){return this.$store.state.searchResults}}},q,!1,function(t){s("60no")},"data-v-406a2cc3",null).exports,Q=s("/ocq"),Y=s("b3L9"),W=s.n(Y),X=(s("7QVd"),s("lQJ9")),Z=s.n(X),tt=s("mtWM"),et=s.n(tt),st=s("NYxO");o.default.use(st.a);var ot=new st.a.Store({state:{ifLogin:!1,currentUsername:"",currentUser:{},currentGood:{},searchKey:"",searchResults:[]},getters:{}});o.default.config.productionTip=!1,o.default.prototype.$axios=et.a,o.default.use(Q.a),o.default.use(W.a),o.default.use(Z.a);var nt=[{path:"/",component:b},{path:"/index.html",component:b},{path:"/register",component:$},{path:"/login",component:L},{path:"/shopcart",component:N},{path:"/collect",component:A},{path:"/message",component:P},{path:"/personal",component:G},{path:"/fresh",component:_},{path:"/discount",component:f},{path:"/recommend",component:m},{path:"/product-details",component:F},{path:"/miss",component:K},{path:"/search-results",component:H}],rt=Q.a.prototype.push;Q.a.prototype.push=function(t){return rt.call(this,t).catch(function(t){return t})};var it=new Q.a({mode:"history",routes:nt});it.afterEach(function(t,e,s){window.scrollTo(0,0)}),new o.default({el:"#app",store:ot,router:it,components:{App:l},template:"<App/>"})},Yhoy:function(t,e){},i1nD:function(t,e){},"m++0":function(t,e){},rVGK:function(t,e){},vCxf:function(t,e){},"vTX/":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1eb01cd0ac2c29099425.js.map